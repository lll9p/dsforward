# 更新日志

## v1.0.0 - 2025-05-30

### 🎉 重大重构和改进

#### ✨ 新功能
- **生产就绪**: 完整的生产环境部署支持
- **Docker支持**: 完整的容器化部署方案
- **健康检查**: 添加 `/health` 端点用于监控
- **配置管理**: 支持环境变量和命令行参数配置
- **日志系统**: 结构化日志记录，支持多级别
- **性能优化**: HTTP/2支持，连接池优化
- **错误处理**: 完善的异常处理和错误恢复

#### 🔧 技术改进
- **现代化架构**: 使用FastAPI lifespan事件管理
- **类型安全**: 完整的类型注解
- **异步优化**: 全异步架构，提高并发性能
- **资源管理**: 自动资源清理和连接池管理
- **流式优化**: 使用 `httpx.stream()` 优化流式响应处理

#### 📦 部署支持
- **Dockerfile**: 优化的多阶段构建
- **Docker Compose**: 完整的编排配置
- **环境配置**: `.env` 文件支持
- **反向代理**: Nginx/Traefik配置示例
- **监控**: 健康检查和性能监控

#### 🛠️ 开发工具
- **测试套件**: 功能测试和性能测试
- **基准测试**: 性能基准测试脚本
- **Makefile**: 常用操作自动化
- **部署指南**: 详细的部署文档

#### 📈 性能提升
- **健康检查**: ~2000 RPS
- **代理转发**: 支持高并发请求
- **内存优化**: 减少内存占用
- **连接复用**: HTTP/2和连接池优化

#### 🔒 安全增强
- **非root用户**: Docker容器使用非特权用户
- **SSL支持**: 可配置的SSL验证
- **输入验证**: 请求参数验证
- **错误隐藏**: 不暴露内部错误信息

#### 📚 文档完善
- **README**: 完整的使用指南
- **部署指南**: 详细的部署文档
- **API文档**: FastAPI自动生成的API文档
- **故障排除**: 常见问题解决方案

### 🐛 修复
- 修复流式请求检测逻辑
- 修复响应头处理
- 修复资源泄漏问题
- 修复错误处理逻辑

### 💔 破坏性变更
- 默认监听地址改为 `0.0.0.0`（Docker友好）
- 移除已弃用的 `on_event` 处理器
- 更新依赖版本要求

### 📋 依赖更新
- FastAPI >= 0.104.0
- uvicorn[standard] >= 0.24.0
- httpx >= 0.25.0
- pydantic >= 2.0.0

---

## v0.0.1 - 初始版本

### ✨ 功能
- 基本的API代理功能
- `<think>` 标签自动添加
- 流式和非流式响应支持
- 简单的命令行界面
